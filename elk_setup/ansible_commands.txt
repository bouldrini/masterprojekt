elasticsearch_version: '7.x'
elasticsearch_package_state: latest
elasticsearch_service_state: started
elasticsearch_service_enabled: true



elasticsearch_cluster_name: "ansible-elasticsearch"


# get hostname for current server
elasticsearch_node_name: "{{ hostvars[inventory_hostname]['inventory_hostname'] }}"

# get private ip address for current server
elasticsearch_network_host: "{{  hostvars[inventory_hostname]['ansible_facts']['eth1']['ipv4']['address'] }}"

elasticsearch_http_port: 9200



# get private ip addresses of all servers in group
vars:
    list_of_ips: "{{ groups['elasticsearch_servers'] | map('extract', hostvars, ['ansible_facts', 'eth1', 'ipv4', 'address']) | join(',') }}"

elasticsearch_seed_hosts: list_of_ips




# get hostnames of all servers in group
vars:
 list_of_master_eligable_nodes: "{{ groups['elasticsearch_servers'] | map('extract', hostvars, ['inventory_hostname']) | join(',') }}"

elasticsearch_initial_master_nodes: "{{ list_of_master_eligable_nodes }}"




# get host RAM
hostvars[inventory_hostname]['ansible_memory_mb']["real"].total


elasticsearch_service_state: hostvars[groups['elasticsearch_servers'][0]]['custom_elasticsearch_service_state']
elasticsearch_service_enabled: hostvars[groups['elasticsearch_servers'][0]]['custom_elasticsearch_service_enabled']
elasticsearch_http_port: hostvars[groups['elasticsearch_servers'][0]]['custom_elasticsearch_http_port']
elasticsearch_cluster_name: hostvars[groups['elasticsearch_servers'][0]]['custom_elasticsearch_cluster_name']



sudo nano /usr/lib/systemd/system/elasticsearch.service


sudo add-apt-repository --remove ppa:openjdk-r/ppa
sudo apt-get remove openjdk*
sudo apt-get --purge autoremove elasticsearch
sudo rm -rf /var/lib/elasticsearch/
sudo rm -rf /etc/elasticsearch



TODO:
 - /etc/default/elasticsearch #MAX_MAP_COUNT einkommentieren!
 - Berechtigungen setzen für /etc/elasticsearch
 - Berechtigungen setzen für /var/log/
 - Default für jvm parameter flag setzen